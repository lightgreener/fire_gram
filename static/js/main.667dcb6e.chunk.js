(this.webpackJsonpfire_gram=this.webpackJsonpfire_gram||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(2),r=n.n(c),i=n(19),s=n.n(i),o=(n(30),n(8)),l=n(20),u=n(21),j=n(24),b=n(23),d=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h1",{children:" Fire Gallery "}),Object(a.jsx)("h2",{children:"your Pictures"})]})}}]),n}(c.Component),f=n(14),p=n.n(f),g=n(22),O=n(11);n(35),n(36);O.a.initializeApp({apiKey:"AIzaSyAsbI-xsHKWpFET55J8H9xWAD5ANYuWzbg",authDomain:"afternoon-firegram.firebaseapp.com",databaseURL:"https://afternoon-firegram.firebaseio.com",projectId:"afternoon-firegram",storageBucket:"afternoon-firegram.appspot.com",messagingSenderId:"326297334941",appId:"1:326297334941:web:3cf5693b77a9241b795074"});O.a.database();var m=O.a.storage(),h=O.a.firestore(),v=O.a.firestore.FieldValue.serverTimestamp,x=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),d=b[0],f=b[1],O=Object(c.useState)(""),x=Object(o.a)(O,2);x[0],x[1];return Object(c.useEffect)((function(){var t=m.ref(e.name),n=h.collection("pic");console.log(n),t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){u(e)}),Object(g.a)(p.a.mark((function e(){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:a=e.sent,console.log("it is url: "+a),c=v(),n.add({url:a,createAt:c}),f(a);case 7:case"end":return e.stop()}}),e)}))))}),[e]),{progress:a,url:d,error:l}},y=n(9),S=function(e){var t=e.file,n=e.setFile,r=x(t),i=r.url,s=r.progress;return Object(c.useEffect)((function(){i&&n(null)}),[i,n]),Object(a.jsx)(y.a.div,{className:"progress-bar",initial:{width:0},animate:{width:s+"%"}})},I=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],j=["image/png","image/jpeg"];return Object(a.jsxs)("form",{children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"file",onChange:function(e){console.log("working");var t=e.target.files[0];console.log(t),t&&j.includes(t.type)?(r(t),u("")):(r(null),u("please select an image file (png or jpeg)"))}}),Object(a.jsx)("span",{children:"+"})]}),Object(a.jsxs)("div",{className:"output",children:[l&&Object(a.jsx)("div",{className:"error",children:l}),n&&Object(a.jsx)("div",{children:n.name}),n&&Object(a.jsx)(S,{file:n,setFile:r})]})]})},k=n(15),w=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var t=h.collection(e).orderBy("createAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:a}},N=function(e){var t=e.setSelectedImg,n=w("pic").docs;return console.log(n),Object(a.jsx)("div",{className:"img-grid",children:n&&n.map((function(e){return Object(a.jsxs)(y.a.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},onClick:function(){return t(e.url)},children:[Object(a.jsx)(y.a.img,{src:e.url,alt:"uploaded",Initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}),"    "]},e.id)}))})},F=function(e){var t=e.selectedImg,n=e.setSelectedImg;return Object(a.jsxs)(y.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n(null)},initial:{opacity:0},animate:{opacity:1},children:[Object(a.jsx)(y.a.img,{src:t,alt:"enlarge pic",initial:{y:"-50vh"},animate:{y:0}}),Object(a.jsx)(y.a.button,{className:"deleteBtn",onClick:function(e){console.log(t),n(null),console.log()},initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"X"})]})};var A=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(d,{}),Object(a.jsx)(I,{}),Object(a.jsx)(N,{setSelectedImg:r}),n&&Object(a.jsx)(F,{selectedImg:n,setSelectedImg:r})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root")),C()}},[[37,1,2]]]);
//# sourceMappingURL=main.667dcb6e.chunk.js.map